{% extends 'base.html' %}
{% load l10n %}

{% block style %}
<link rel="stylesheet" href="https://unpkg.com/leaflet@1.5.1/dist/leaflet.css" integrity="sha512-xwE/Az9zrjBIphAcBb3F6JVqxf46+CDLwfLMHloNu6KEQCAWi6HcDUbeOfBIptF7tcCzusKFjFw2yuvEpDL9wQ==" crossorigin=""/>
<style>#mapid { height: 480px; }</style>
{% endblock %}

{% block content %}
 <div id="mapid"></div>
{% endblock %}

{% block scripts %}
 <script src="https://unpkg.com/leaflet@1.5.1/dist/leaflet.js" integrity="sha512-GffPMF3RvMeYyc1LWMHtK8EbPv0iNZ8/oTtHPx9/cc2ILxQ+u905qIwdpULaqDkyBKgOaB57QTMg7ztg8Jm2Og==" crossorigin=""></script>

  <script>
    var mymap = L.map('mapid').setView([43.5, 1.5], 6);

    L.tileLayer('http://a.tile.openstreetmap.fr/osmfr/{z}/{x}/{y}.png', {
    attribution: 'Map data &copy; <a href="https://www.openstreetmap.org/">OpenStreetMap</a> contributors, <a href="https://creativecommons.org/licenses/by-sa/2.0/">CC-BY-SA</a>',
    maxZoom: 18
}).addTo(mymap);

    {% for object in object_list %}
        var marker = L.marker([{{ object.point.1|unlocalize }}, {{ object.point.0|unlocalize }}]).addTo(mymap)
         .bindPopup('<a href="{{ object.wd_url }}">{{ object }}</a>');
    {% endfor %}


  </script>
{% endblock %}
